<!DOCTYPE html>
<html>

  <head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>JVM性能监控简介</title>

	<link rel="stylesheet" href="/styles/css/index.css">
	<link rel="stylesheet" href="/styles/css/fontawesome/css/font-awesome.min.css">
	<link rel="canonical" href="/2017/01/04/Java%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97_JVM%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7/">
	<link rel="alternate" type="application/rss+xml" title="Jun Xi Gu 的博客" href="/feed.xml">
	
	<meta name="description" content="顾俊喜;个人博客">

  	<style type="text/css">
	  	.docs-content{
	  		margin-bottom: 10px;
	  	}
  	</style>
</head>

  <body class="index">

    <header class="navbar navbar-inverse navbar-fixed-top docs-nav" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">    
        <li>
          <a href="/">主页</a>
        </li>
        <li>
          <a href="/categories/">分类博客</a>
        </li>
        <li>
          <a href="/tag">标签博客</a>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">关于<b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a rel="nofollow" target="_blank" href="https://github.com/junxigu/">Github</a></li>
            <li><a rel="nofollow" target="_blank" href="https://github.com/luoyan35714/LessOrMore.git">本博客模板</a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </div>
</header>
    <div class="docs-header" id="content">
  <div class="container">
  	
  		<!--
		    <h1>JVM性能监控简介</h1>
		    <p>Post on Jan 04, 2017 by <a href="/about">Jun Xi Gu</a></p>
		-->
		    <h1>Stay Hungry Stay Foolish</h1>
    
  </div>
</div>
    
      
<div class="banner">
  <div class="container">
  	
    	<a href="/categories/#技术-ref">技术</a>	/
    	<a href="/tag/#性能监控-ref">性能监控</a>
    
  </div>
</div>

    

    <div class="container docs-container">
  <div class="row">
    <div class="col-md-3">
      <div class="sidebar hidden-print" role="complementary">
        <div id="navigation">
  <h1>目录</h1>
  <ul class="nav sidenav">
<!--
    
      
      
      
      

      
        <li><a href="#year_2017">2017</a>
          <ul class="nav">
            <li><a href="#month_2017_September">September</a></li>
      

      
            
          
              <li><a href="#month_2017_August">August</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2017_May">May</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2017_February">February</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2017_January">January</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
        
            </ul>
          </li>
          <li><a href="#year_2016">2016</a>
            <ul class="nav">
              <li><a href="#month_2016_December">December</a></li>
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2016_November">November</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2016_October">October</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2016_September">September</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            </ul>
          </li>
      
    
-->
  </ul>
</div> 
      </div>
    </div>
    <div class="col-md-9" role="main">
      <div class="panel docs-content">
        <div class="wrapper">
            <header class="post-header">
              <h1 class="post-title">JVM性能监控简介</h1>
              <!--
                <p class="post-meta">Jan 4, 2017</p>
              -->
              <div class="meta">Posted on <span class="postdate">Jan 04, 2017</span> By <a target="_blank" href="">Jun Xi Gu</a></div>
              <br />
            </header>
            <article class="post-content">
              <ul id="markdown-toc">
  <li><a href="#监控jvm垃圾回收" id="markdown-toc-监控jvm垃圾回收">监控JVM垃圾回收</a></li>
  <li><a href="#监控jit编译" id="markdown-toc-监控jit编译">监控JIT编译</a></li>
  <li><a href="#监控类加载" id="markdown-toc-监控类加载">监控类加载</a></li>
  <li><a href="#监控java应用" id="markdown-toc-监控java应用">监控Java应用</a></li>
  <li><a href="#参考文献" id="markdown-toc-参考文献">参考文献</a></li>
</ul>

<p><strong>本文是对JVM性能监控的基本知识的汇总和个人理解</strong></p>

<hr />

<p>JVM的性能监控主要包括3种监控：垃圾回收、JIT编译 和 类加载</p>

<h2 id="监控jvm垃圾回收">监控JVM垃圾回收</h2>

<p><strong>命令行工具</strong></p>

<p>通过用命令行参数来打印出垃圾回收的一些信息，通过这些信息来监控垃圾回收</p>

<p>获取垃圾收集信息的相关命令：<br />
-verbose:gc 输出垃圾收集信息<br />
-XX:+PrintGCDetails 输出GC详细信息<br />
-XX:+PrintGCTimeStamps 输出时间戳<br />
-XX:+PrintGCDateStamps 输出日期<br />
-Xloggc:<filename> 输出到文件  
-XX:+PrintGCApplicationConcurrentTIme 报告application在安全点之间的运行时间  
+XX:+PrintGCApplicationStoppedTime 报告application线程被阻塞的时间</filename></p>

<p>从垃圾收集输出的日志里需要获得信息包括：</p>
<ol>
  <li>所使用的垃圾收集器</li>
  <li>Java堆大小</li>
  <li>新生代和老年代大小</li>
  <li>永久代大小</li>
  <li>Minor GC持续时间</li>
  <li>Minor GC的频率</li>
  <li>Minor GC的空间回收量</li>
  <li>Major GC的持续时间</li>
  <li>Major GC的频率</li>
  <li>每个并发回收周期内的空间回收量</li>
  <li>垃圾回收前后Java堆的占用量</li>
  <li>垃圾回收前后新生代和老年代的占用量</li>
  <li>垃圾回收前后永久代的占用量</li>
  <li>是否老年代或永久代的占用触发Major GC</li>
  <li>应用是否显式触发垃圾回收</li>
</ol>

<p>对收集到的垃圾收集信息可以用GCHisto来进行离线分析</p>

<p><strong>图形化工具</strong></p>

<p>JConsole，VisualGC和VisualVM</p>

<h2 id="监控jit编译">监控JIT编译</h2>

<p>JIT编译器会对运行次数足够多的代码进行优化，对于优化不当的代码会进行逆优化甚至重新优化</p>

<p>当需要监控优化，逆优化和重新优化的信息时可用命令行参数<br />
-XX:+PrintCompilation</p>

<h2 id="监控类加载">监控类加载</h2>

<p>当类加载到足够多的时候会触发垃圾回收，通过监控类加载信息能为优化提供信息</p>

<p>可以使用图形化工具来查看类的加载量：JConsole，VisualGC和VisualVM</p>

<p>可通过垃圾回收的日志信息来查看类的卸载</p>

<h2 id="监控java应用">监控Java应用</h2>

<p>监控应用的常用方法是查看应用的输出日志<br />
当应用使用了内置的MBean时，可以使用兼容的JMX工具来监控这些MBean</p>

<p>若要快速地定位应用的锁竞争信息，可以通过命令工具jstack来获取线程的转储信息</p>

<h2 id="参考文献">参考文献</h2>

<p>《Java性能优化权威指南》</p>

            </article>
        </div>
      </div>
      <div class="panel docs-content">
        <article class="post-content">
          <div class="wrapper">
             
          </div>
        </article>
      </div>
    </div>
  </div>
</div>

    
    <footer class="footer" role="contentinfo">
	<div class="container">
		<p class="copyright">Copyright &copy; 2014-2020 <a href=""><code>Jun Xi Gu</code></a>.</p>
		<p>Customizied from <a href="https://github.com/luoyan35714/LessOrMore">LessOrMore</a></p></p>
		<p>Powered by <a href="http://jekyllrb.com">Jekyll</a>, theme from <a href="http://lesscss.cn/">Less</a></p>
	</div>
</footer>

<script src="/styles/js/jquery.min.js"></script>
<script src="/styles/js/bootstrap.min.js"></script>
<script src="/styles/js/holder.min.js"></script>
<script src="/styles/js/application.js"></script>
<script src="/styles/js/lessismore.js"></script>

  </body>
</html>
